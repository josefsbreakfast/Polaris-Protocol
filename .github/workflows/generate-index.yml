name: ðŸ”„ Generate Markdown Index

on:
Â  push:
Â  Â  branches: [ main ]

jobs:
Â  build:
Â  Â  runs-on: ubuntu-latest

Â  Â  steps:
Â  Â  Â  - name: Checkout the repo
Â  Â  Â  Â  uses: actions/checkout@v3

Â  Â  Â  - name: Generate index.md
Â  Â  Â  Â  run: |
Â  Â  Â  Â  Â  echo "# ðŸ“‚ Polaris Protocol â€“ File Index" > index.md
Â  Â  Â  Â  Â  echo "" >> index.md
Â  Â  Â  Â  Â  find . -type f -name "*.md" ! -path "./.git/*" ! -name "index.md" | sort | while read file; do
Â  Â  Â  Â  Â  Â  clean_path=${file#./}
Â  Â  Â  Â  Â  Â  echo "- [${clean_path}](./${clean_path})" >> index.md
Â  Â  Â  Â  Â  done

Â  Â  Â  - name: Commit and push index.md
Â  Â  Â  Â  run: |
Â  Â  Â  Â  Â  git config user.name "github-actions[bot]"
Â  Â  Â  Â  Â  git config user.email "github-actions[bot]@users.noreply.github.com"
Â  Â  Â  Â  Â  git add index.md
Â  Â  Â  Â  Â  git commit -m "ðŸ”„ Auto-update index.md"
Â  Â  Â  Â  Â  git push
Â  Â  Â  Â  env:
Â  Â  Â  Â  Â  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
